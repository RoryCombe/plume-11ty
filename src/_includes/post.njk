{% extends "layout.njk" %}

{% block content %}
<article class="post">
  <header>
    <h1>{{ title }}</h1>
    <p class="post-meta">{{ date | date("long") }}</p>
  </header>

  <section class="post-body">
    {{ content | safe }}
  </section>

  <hr />

  {% if collections.posts %}
    {% for post in collections.posts %}
      {% if post.url == page.url %}
        <nav class="post-nav">
          {% if not loop.last %}
            {% set nextPost = collections.posts[loop.index] %}
            <a class="next" href="{{ site.baseUrl }}{{ nextPost.url }}">{{ nextPost.data.title }} →</a>
          {% endif %}
          {% if not loop.first %}
            {% set prevPost = collections.posts[loop.index0 - 1] %}
            <a class="prev" href="{{ site.baseUrl }}{{ prevPost.url }}">← {{ prevPost.data.title }}</a>
          {% endif %}
        </nav>
      {% endif %}
    {% endfor %}
  {% endif %}
</article>
{% endblock %}